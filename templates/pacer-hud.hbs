<div id="stream-pacer-container" class="{{#if hasActiveSignal}}signal-active{{/if}} {{#if isCountdown}}countdown-active urgency-{{countdownUrgency}}{{/if}}">
  {{!-- Header --}}
  <div class="pacer-header">
    <div class="drag-handle" title="{{localize 'STREAM_PACER.DragToMove'}}">
      <i class="fas fa-grip-vertical"></i>
    </div>
    <span class="pacer-title">{{localize "STREAM_PACER.Title"}}</span>
    {{#if isGM}}
    <div class="gm-badge">GM</div>
    {{/if}}
  </div>

  {{!-- Player Status Bar --}}
  <div class="pacer-players">
    {{#each players}}
    <div class="player-status {{statusClass}}" title="{{name}}: {{statusTitle}}">
      <i class="fas {{statusIcon}}"></i>
      <span class="player-name">{{name}}</span>
    </div>
    {{else}}
    <div class="no-players">{{localize "STREAM_PACER.NoPlayers"}}</div>
    {{/each}}
  </div>

  {{!-- Player Status Buttons (non-GM only) --}}
  {{#unless isGM}}
  <div class="pacer-my-status">
    <div class="status-buttons">
      <button type="button" class="status-btn status-engaged {{#if myStatusEngaged}}active{{/if}}"
              data-action="set-status" data-status="engaged"
              title="{{localize 'STREAM_PACER.Status.engaged'}}">
        <i class="fas fa-hourglass"></i>
      </button>
      <button type="button" class="status-btn status-hand-raised {{#if myStatusHandRaised}}active{{/if}}"
              data-action="set-status" data-status="hand_raised"
              title="{{localize 'STREAM_PACER.Status.hand_raised'}}">
        <i class="fas fa-hand-paper"></i>
      </button>
      <button type="button" class="status-btn status-need-time {{#if myStatusNeedTime}}active{{/if}}"
              data-action="set-status" data-status="need_time"
              title="{{localize 'STREAM_PACER.Status.need_time'}}">
        <i class="fas fa-brain"></i>
      </button>
      <button type="button" class="status-btn status-ready {{#if myStatusReady}}active{{/if}}"
              data-action="set-status" data-status="ready"
              title="{{localize 'STREAM_PACER.Status.ready'}}">
        <i class="fas fa-check-circle"></i>
      </button>
    </div>
  </div>
  {{/unless}}

  {{!-- GM Signal Display --}}
  {{#if hasActiveSignal}}
  <div class="pacer-signal {{#if isSoftSignal}}soft-signal{{else if isFloorOpen}}floor-open-signal{{else}}hard-signal{{/if}}">
    {{#if isSoftSignal}}
    <i class="fas fa-exclamation-triangle"></i>
    <span>{{localize "STREAM_PACER.SoftSignalMessage"}}</span>
    {{else if isFloorOpen}}
    <i class="fas fa-microphone"></i>
    <span>{{localize "STREAM_PACER.FloorOpenMessage"}}</span>
    {{else}}
    <i class="fas fa-clock"></i>
    <span>{{localize "STREAM_PACER.CountdownMessage"}}</span>
    <span class="countdown-timer">{{formattedCountdown}}</span>
    {{/if}}
  </div>
  {{/if}}

  {{!-- GM Controls --}}
  {{#if isGM}}
  <div class="pacer-gm-controls">
    <button type="button" class="gm-btn soft-signal-btn {{#if isSoftSignal}}active{{/if}}"
            data-action="soft-signal"
            title="{{localize 'STREAM_PACER.SoftSignalTooltip'}}">
      <i class="fas fa-exclamation-triangle"></i>
    </button>
    <button type="button" class="gm-btn countdown-btn {{#if isCountdown}}active{{/if}}"
            data-action="start-countdown"
            title="{{localize 'STREAM_PACER.CountdownTooltip'}}">
      <i class="fas fa-clock"></i>
    </button>
    <button type="button" class="gm-btn floor-open-btn {{#if isFloorOpen}}active{{/if}}"
            data-action="open-floor"
            title="{{localize 'STREAM_PACER.FloorOpenTooltip'}}">
      <i class="fas fa-microphone"></i>
    </button>
    {{#if hasActiveSignal}}
    <button type="button" class="gm-btn cancel-btn"
            data-action="cancel-signal"
            title="{{localize 'STREAM_PACER.CancelTooltip'}}">
      <i class="fas fa-times"></i>
    </button>
    {{/if}}
    <button type="button" class="gm-btn reset-btn"
            data-action="reset-all"
            title="{{localize 'STREAM_PACER.ResetTooltip'}}">
      <i class="fas fa-redo"></i>
    </button>
  </div>
  {{/if}}
</div>
